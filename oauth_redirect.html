<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>INat prototypes - OAuth page</title>
    <meta name="author" content="Sean Clifford">
    <link rel="stylesheet" href="css/styles.css?v=1.0">
    <link rel="shortcut icon" href="favicon.ico" type="image/icon">
  </head>
  
  <body>
    <h1>Completing authentication...</h1>
    <div id="result"></div>
    <script src="js/constants.js?v=1.0.0"></script>
    <script src="js/api.js?v=1.0.0"></script>
    <script src="js/auth.js?v=1.0.0"></script>
    <script>
      (async () => {
            
        const urlParams = new URLSearchParams(window.location.search);
        const auth_code = urlParams.get('code');

        await performTokenRequest(auth_code);

        let div = document.getElementById('result');
        div.innerHTML = "Completed requesting access token!";
        redirectToPreAuthLocation();
      })();
    </script>
  </body>
</html>